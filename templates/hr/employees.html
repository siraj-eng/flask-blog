{% extends 'base.html' %}
{% block title %}Employees - SoftNet Internal{% endblock %}
{% block content %}
<div class="container py-4">
  <h2 class="mb-4">Employees</h2>
  <div class="card shadow-sm">
    <div class="card-body">
      <form method="get" class="mb-3 d-flex justify-content-between align-items-center">
        <div class="row g-2 align-items-center flex-grow-1">
          <div class="col-md-8">
            <input type="text" class="form-control" name="q" placeholder="Search by name, department, or position" value="{{ request.args.get('q', '') }}">
          </div>
          <div class="col-md-2">
            <button type="submit" class="btn btn-green w-100"><i class="fas fa-search me-1"></i>Search</button>
          </div>
        </div>
        <a href="{{ url_for('hr_employees_export', q=request.args.get('q', '')) }}" class="btn btn-outline-primary ms-3"><i class="fas fa-file-csv me-1"></i>Export CSV</a>
        <a href="{{ url_for('hr_employees_export_pdf', q=request.args.get('q', '')) }}" class="btn btn-outline-danger ms-2"><i class="fas fa-file-pdf me-1"></i>Export PDF</a>
      </form>
      <div class="table-responsive">
        <table class="table table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th>Name</th>
              <th>Department</th>
              <th>Position</th>
              <th>Email</th>
              <th>Date Joined</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for emp in employees %}
            <tr>
              <td>{{ emp.full_name or emp.username }}</td>
              <td>{{ emp.department or '-' }}</td>
              <td>{{ emp.position or '-' }}</td>
              <td>{{ emp.email }}</td>
              <td>{{ emp.created_at[:10] }}</td>
              <td><a href="{{ url_for('hr_employee_detail', user_id=emp.id) }}" class="btn btn-sm btn-outline-primary">View</a></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% if not employees %}
        <p class="text-muted mt-3">No employees found.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %} 